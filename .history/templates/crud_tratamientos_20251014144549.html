{% extends 'crud_base.html' %}

{% block crud_content %}
<header class="crud-header">
  <div>
    <div class="crud-title">ğŸ©º GestiÃ³n de Tratamientos</div>
    <div class="crud-subtitle">Administrar planes de tratamiento</div>
  </div>
  <div class="crud-actions">
    <a href="/api/tratamientos/" class="btn btn-secondary" target="_blank">API</a>
  </div>
</header>

<div class="crud-card">
  <h3>Tratamientos Registrados</h3>
  <table class="table">
    <thead>
      <tr>
        <th>ID</th>
        <th>Consulta</th>
        <th>DescripciÃ³n</th>
        <th>DuraciÃ³n (dÃ­as)</th>
        <th>Acciones</th>
      </tr>
    </thead>
    <tbody>
      {% for tratamiento in tratamientos %}
      <tr>
        <td>{{ tratamiento.id }}</td>
        <td>#{{ tratamiento.consulta.id }} - {{ tratamiento.consulta.paciente.nombre }}</td>
        <td>{{ tratamiento.descripcion }}</td>
        <td>{{ tratamiento.duracion_dias }}</td>
        <td class="action-buttons">
          <a href="#" class="btn btn-edit btn-small">Editar</a>
          <form method="POST" action="{% url 'crud:eliminar_tratamiento' tratamiento.id %}" style="display: inline;">
            {% csrf_token %}
            <button type="submit" class="btn btn-delete btn-small" onclick="return confirm('Â¿Eliminar tratamiento?')">Eliminar</button>
          </form>
        </td>
      </tr>
      {% empty %}
      <tr>
        <td colspan="5" style="text-align: center; color: var(--muted);">No hay tratamientos registrados</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}